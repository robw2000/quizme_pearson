/*
 * jQuery pageSlide
 * Version 2.0
 * http://srobbin.com/jquery-pageslide/
 *
 * jQuery Javascript plugin which slides a webpage over to reveal an additional interaction pane.
 *
 * Copyright (c) 2011 Scott Robbin (srobbin.com)
 * Dual licensed under the MIT and GPL licenses.
*/

;(function(e){function s(t,r){if(t.indexOf("#")===0){e(t).clone(true).appendTo(n.empty()).show()}else if(t.indexOf(".")===0){e(t).clone(true).appendTo(n.empty()).show()}else{if(r){var i=e("<iframe />").attr({src:t,frameborder:0,hspace:0}).css({width:"100%",height:"100%"});n.html(i)}else{n.load(t)}n.data("localEl",false)}}function o(i,s,o){var u=n.outerWidth(true),a={},f={};if(n.is(":visible")||r)return;r=true;var l=t.css("width");t.css("width",l);switch(i){case"left":n.css({left:"auto",right:"-"+u+"px"});a["margin-left"]="-="+u;f["right"]="+="+u;break;default:n.css({left:"-"+u+"px",right:"auto"});a["margin-left"]="+="+u;f["left"]="+="+u;break}t.animate(a,s);n.show().animate(f,s,function(){r=false});for(var c=0;c<o.length;c++){e(o[c]).animate(f,s)}}var t=e("body"),n=e("#pageslide");var r=false,i;if(n.length==0){n=e("<div />").attr("id","pageslide").css("display","none").appendTo(e("body"))}e.fn.pageslide=function(t){var r=this;r.click(function(r){var s=e(this),o=e.extend({href:s.attr("href")},t);r.preventDefault();r.stopPropagation();if(n.is(":visible")&&s[0]==i){e.pageslide.close()}else{e.pageslide(o);i=s[0]}})};e.fn.pageslide.defaults={speed:200,direction:"right",modal:false,iframe:true,href:null,callback:function(){},slideOthers:[]};e.pageslide=function(r){var i=e.extend({},e.fn.pageslide.defaults,r);if(n.is(":visible")&&n.data("direction")!=i.direction){e.pageslide.close(function(){s(i.href,i.iframe);o(i.direction,i.speed,i.slideOthers)})}else{s(i.href,i.iframe);if(n.is(":hidden")){o(i.direction,i.speed,i.slideOthers)}}n.data(i);if(typeof i.callback!="undefined")i.callback();t.addClass("pageslideOpen")};e.pageslide.close=function(n){var i=e("#pageslide"),s=i.outerWidth(true),o=i.data("speed"),u={},a={},f=i.data("slideOthers");if(i.is(":hidden")||r)return;r=true;var l=t.css("width");t.css("width",l);switch(i.data("direction")){case"left":u["margin-left"]="+="+s;a["right"]="-="+s;break;default:u["margin-left"]="-="+s;a["left"]="-="+s;break}i.animate(a,o);t.animate(u,o,function(){i.hide();t.css("width","");r=false;if(typeof n!="undefined")n()});for(var c=0;c<f.length;c++){e(f[c]).animate(a,o,function(){e(this).css("left","")})}t.removeClass("pageslideOpen")};n.click(function(e){e.stopPropagation()});e(document).bind("click keyup",function(t){if(t.type=="keyup"&&t.keyCode!=27)return;if(n.is(":visible")&&!n.data("modal")){e.pageslide.close()}});e(window).resize(function(){e.pageslide.close();t.css("width","")})})(jQuery);
